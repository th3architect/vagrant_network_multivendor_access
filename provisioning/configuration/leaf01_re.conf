system {
    host-name leaf01_re;
    domain-name example.com;
    domain-search example.com;
    time-zone America/Chicago;
    authentication-order password;
    root-authentication {
        encrypted-password "$5$AXpsXiSr$J9S.i.up6XjFsVGAIgWtp5xJmMsWHtUF.6K5cMEAi19";
    }
    name-server {
        10.255.1.1;
        10.255.1.2;
        8.8.8.8;
    }
    login {
        message "==================================================================\n==================================================================\n===             UNAUTHORIZED IP ADDRESS DETECTED               ===\n===               LOGGING AND HONEYPOT ENABLED                 ===\n==================================================================\n==================================================================";
        class SUPER_USER {
            idle-timeout 0;
            permissions all;
        }
        user ansible {
            uid 2101;
            class SUPER_USER;
            authentication {
                encrypted-password "$5$W9klZ.yt$L19UjdXNi3dRJbTUtCM99qSf2BIOcQzplAnFY6YNWkA";
            }
        }
        password {
            minimum-length 8;
        }
    }
    services {
        ftp;
        ssh {
            max-sessions-per-connection 4;
        }
        netconf {
            ssh;
        }
        rest {
            http {
                port 8080;
            }
            enable-explorer;
        }
        web-management {
            http {
                interface me0.0;
            }
        }
    }
    syslog {
        archive size 10m files 10;
        user * {
            any emergency;
        }
        host 10.255.2.1 {
            any any;
            source-address 10.255.0.2;
        }
        host 10.255.2.2 {
            any error;
            source-address 10.255.0.2;
        }
        file messages {
            any notice;
            authorization info;
            explicit-priority;
        }
        file default-log-messages {
            any info;
            structured-data;
            match "(requested 'commit' operation)|(copying configuration to juniper.save)|(commit complete)|ifAdminStatus|(FRU power)|(FRU removal)|(FRU insertion)|(link UP)|transitioned|Transferred|transfer-file|(license add)|(license delete)|(package -X update)|(package -X delete)|(FRU Online)|(FRU Offline)|(plugged in)|(unplugged)|GRES";
        }
    }
    commit synchronize;
    max-configurations-on-flash 49;
    max-configuration-rollbacks 49;
    license {
        autoupdate {
            url https://ae1.juniper.net/junos/key_retrieval;
        }
    }
    ntp {
        boot-server 10.255.1.1;
        server 10.255.1.1;
        server 10.255.1.2;
    }
}
interfaces {
    xe-0/0/0 {
        description spine01_leaf01;
        unit 0 {
            family inet {
                address 10.255.1.1/31;
            }
        }
    }
    xe-0/0/1 {
        description spine02_leaf01;
        unit 0 {
            family inet {
                address 10.255.2.1/31;
            }
        }
    }
    xe-0/0/2 {
        description USERS_NETWORK;
        unit 0 {
            family ethernet-switching {
                interface-mode access;
                vlan {
                    members vlan_0010;
                }
            }
        }
    }
    xe-0/0/3 {
        description USERS_NETWORK;
        unit 0 {
            family ethernet-switching {
                interface-mode access;
                vlan {
                    members vlan_0010;
                }
            }
        }
    }
    xe-0/0/4 {
        description USERS_NETWORK;
        unit 0 {
            family ethernet-switching {
                interface-mode access;
                vlan {
                    members vlan_0010;
                }
            }
        }
    }
    xe-0/0/5 {
        description TRUNK_TO_RACK;
        unit 0 {
            family ethernet-switching {
                interface-mode trunk;
                vlan {
                    members [ vlan_0010 vlan_0020 vlan_0030 vlan_0040 vlan_0050 ];
                }
            }
        }
    }
    xe-0/0/6 {
        description VOICE_NETWORK;
        unit 0 {
            family ethernet-switching {
                interface-mode access;
                vlan {
                    members vlan_0020;
                }
            }
        }
    }
    me0 {
        description management;
        unit 0 {
            family inet {
                address 10.255.11.11/16;
            }
        }
    }
    em0 {
        description management;
        unit 0 {
            family inet {
                dhcp;
            }
        }
    }
    em1 {
        description management;
        unit 0 {
            family inet {
                address 169.254.0.2/24;
            }
        }
    }
    lo0 {
        description loopback0;
        unit 0 {
            family inet {
                address 172.16.20.11/32;
            }
        }
    }
    irb {
        unit 1 {
            family inet {
                address 10.1.0.2/16;
            }
            description default;
        }
        unit 10 {
            family inet {
                address 10.0.101.1/24;
            }
            description USERS_NETWORK;
        }
        unit 20 {
            family inet {
                address 10.0.102.1/24;
            }
            description VOICE_NETWORK;
        }
        unit 30 {
            family inet {
                address 10.0.103.1/24;
            }
            description DMZ_NETWORK;
        }
        unit 40 {
            family inet {
                address 10.0.104.1/24;
            }
            description TEST_NETWORK;
        }
        unit 50 {
            family inet {
                address 10.0.105.1/24;
            }
            description LEGACY_NETWORK;
        }
    }
}
snmp {
    name leaf01_re;
    location "Houston, Texas";
    contact "Calvin Remsburg";
    community "public" {
        authorization read-write;
        clients {
            10.255.0.0/16;
            10.255.1.0/16;
        }
    }
    trap-group trap {
        version v2;
        destination-port 162;
        categories {
            chassis;
            routing;
            authentication;
            link;
            startup;
            services;
        }
        targets {
            10.255.0.1;
        }
    }
}

routing-options {
    router-id 172.16.20.11;
    autonomous-system 1.11;
}
protocols {
    lldp {
        port-id-subtype interface-name;
        port-description-type interface-description;
        interface all;
    }
    ospf {
        export REDISTRIBUTE-DIRECT;
        area 0.0.0.0 {
            interface xe-0/0/1.0 {
                interface-type p2p;
            }
            interface xe-0/0/2.0 {
                interface-type p2p;
            }
        }
    }
    mstp {
        configuration-name mstp_domain;
        revision-level 10;
        bridge-priority 4k;
        forward-delay 30;
        max-age 20;
        hello-time 2;
        bpdu-block-on-edge;
        interface xe-0/0/2 {
            mode point-to-point;
            no-root-port;
            edge;
        }
        interface xe-0/0/3 {
            mode point-to-point;
            no-root-port;
            edge;
        }
        interface xe-0/0/4 {
            mode point-to-point;
            no-root-port;
            edge;
        }
        interface xe-0/0/5 {
            mode point-to-point;
            no-root-port;
        }
        interface xe-0/0/6 {
            mode point-to-point;
            no-root-port;
        }
        msti 1 {
            vlan [ 1-4094 ];
            interface xe-0/0/2 {
                priority 160;
                cost 10;
            }
            interface xe-0/0/3 {
                priority 160;
                cost 10;
            }
            interface xe-0/0/4 {
                priority 160;
                cost 10;
            }
            interface xe-0/0/5 {
                priority 160;
                cost 10;
            }
            interface xe-0/0/6 {
                priority 160;
                cost 10;
            }
        }
    }
}
policy-options {
    policy-statement REDISTRIBUTE-DIRECT {
        term 10 {
            from {
                protocol direct;
            }
            then {
                accept;
            }
        }
    }
    policy-statement POLICY_EXPORT_LOCAL_INTERFACES {
        term USERS_NETWORK {
            from {
                route-filter 10.0.101.1/24 exact;
            }
            then {
                accept;
            }
        }
        term VOICE_NETWORK {
            from {
                route-filter 10.0.102.1/24 exact;
            }
            then {
                accept;
            }
        }
        term DMZ_NETWORK {
            from {
                route-filter 10.0.103.1/24 exact;
            }
            then {
                accept;
            }
        }
        term TEST_NETWORK {
            from {
                route-filter 10.0.104.1/24 exact;
            }
            then {
                accept;
            }
        }
        term LEGACY_NETWORK {
            from {
                route-filter 10.0.105.1/24 exact;
            }
            then {
                accept;
            }
        }
    }
}
vlans {
    vlan_0010 {
        description USERS_NETWORK;
        vlan-id 10;
        l3-interface irb.10;
    }
    vlan_0020 {
        description VOICE_NETWORK;
        vlan-id 20;
        l3-interface irb.20;
    }
    vlan_0030 {
        description DMZ_NETWORK;
        vlan-id 30;
        l3-interface irb.30;
    }
    vlan_0040 {
        description TEST_NETWORK;
        vlan-id 40;
        l3-interface irb.40;
    }
    vlan_0050 {
        description LEGACY_NETWORK;
        vlan-id 50;
        l3-interface irb.50;
    }
}
